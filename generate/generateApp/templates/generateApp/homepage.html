<!DOCTYPE html>
<html lang="en">
    {% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate - Project Dashboard</title>
    <link rel="stylesheet" href="{% static 'css/homepage.css' %}">
</head>
<body>

    <!-- Header -->
    <header class="main-header">
        <div class="logo">
            <img src="{% static 'images/logoo.png' %}" alt="Generate Logo" class="logo-image"> 
        </div>
        
        <nav class="nav-links">
            <a href="#">Home</a>
            <div class="nav">
                <a href="#">About <i class="ri-arrow-down-s-line"></i></a>
                <a href="#">Pages <i class="ri-arrow-down-s-line"></i></a>
                <a href="#">Blog <i class="ri-arrow-down-s-line"></i></a>
            </div>
            <a href="#">My Projects</a>
        </nav>
        
        <div class="profile-icon">
            <img src="{% static 'images/account_circle.jpg' %}" alt="Profile Icon" class="logo-image"> 
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Introduction Section -->
        <section class="intro-section">
            <h1>Generate it to <span class="highlight">your needs</span></h1>
            <p>Seamlessly convert user stories into detailed use cases, sequence diagrams, and activity diagrams. Streamline your development process with automated, visual documentation that ensures your team stays aligned from planning to implementation.</p>
            <a href="{% url 'create' %}" class="create-button">
                Create New Project
            </a>
            
        </section>

        <!-- Project Table Section -->
        <section class="project-table-section">
            <div class="search-container">
                <input type="text" placeholder="Search Project" id="search-input">
                <button id="search-button">Search</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Project Name</th>
                        <th>Date Created</th>
                        <th>Last Updated</th>
                        <th>GUI</th>
                        <th>Action</th>
                        <th>History</th>
                    </tr>
                </thead>
                <tbody id="project-table-body">
                    <!-- Example rows -->
    
                    <tr>
                        <td>1</td>
                        <td>Example Project</td>
                        <td>August 3, 2024 13:34 a.m</td>
                        <td>September 1, 2024 06:30 p.m</td>
                        <td><button class="edit-btn"><img src="{% static 'images/Layout.png' %}" alt="Edit" style="width: 40px; height: 40px;"></button></td>
                        <td><button class="edit-btn"><img src="{% static 'images/Edit.png' %}" alt="Edit" style="width: 40px; height: 40px;"></button> <button class="delete-btn"><img src="{% static 'images/Trash.png' %}" alt="Trash" style="width: 40px; height: 40px;"></button></td>
                        <td class="dropdown">
                            <button class="history-btn">
                                <img src="{% static 'images/Back copy.png' %}" alt="Back" style="width: 40px; height: 40px;">
                            </button>
                            <div class="dropdown-content">
                                <a href="{% url 'inputUS' %}"><span class="done-icon">✔️</span>User Story</a>
                                <a href="{% url 'inputUSS' %}"><span class="done-icon">✔️</span>User Story Scenario</a>
                                <a href="{% url 'activity' %}">Activity Diagram</a>
                                <a href="{% url 'sequence' %}">Sequence Diagram</a>
                                <a href="{% url 'classDiag' %}">Class Diagram</a>
                                <a href="{% url 'gui' %}">GUI</a>
                            </div>
                        </td>
                        
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Example Project</td>
                        <td>August 3, 2024 13:34 a.m</td>
                        <td>September 1, 2024 06:30 p.m</td>
                        <td><button class="edit-btn"><img src="{% static 'images/Layout.png' %}" alt="Edit" style="width: 40px; height: 40px;"></button></td>
                        <td><button class="edit-btn"><img src="{% static 'images/Edit.png' %}" alt="Edit" style="width: 40px; height: 40px;"></button> <button class="delete-btn"><img src="{% static 'images/Trash.png' %}" alt="Trash" style="width: 40px; height: 40px;"></button></td>
                        <td class="dropdown">
                            <button class="history-btn">
                                <img src="{% static 'images/Back copy.png' %}" alt="Back" style="width: 40px; height: 40px;">
                            </button>
                            <div class="dropdown-content">
                                <a href="{% url 'inputUS' %}"><span class="done-icon">✔️</span>User Story</a>
                                <a href="{% url 'inputUSS' %}"><span class="done-icon">✔️</span>User Story Scenario</a>
                                <a href="{% url 'activity' %}">Activity Diagram</a>
                                <a href="{% url 'sequence' %}">Sequence Diagram</a>
                                <a href="{% url 'classDiag' %}">Class Diagram</a>
                                <a href="{% url 'gui' %}">GUI</a>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Example Project</td>
                        <td>August 3, 2024 13:34 a.m</td>
                        <td>September 1, 2024 06:30 p.m</td>
                        <td><button class="edit-btn"><img src="{% static 'images/Layout.png' %}" alt="Edit" style="width: 40px; height: 40px;"></button></td>
                        <td><button class="edit-btn"><img src="{% static 'images/Edit.png' %}" alt="Edit" style="width: 40px; height: 40px;"></button> <button class="delete-btn"><img src="{% static 'images/Trash.png' %}" alt="Trash" style="width: 40px; height: 40px;"></button></td>
                        <td class="dropdown">
                            <button class="history-btn">
                                <img src="{% static 'images/Back copy.png' %}" alt="Back" style="width: 40px; height: 40px;">
                            </button>
                            <div class="dropdown-content">
                                <a href="{% url 'inputUS' %}"><span class="done-icon">✔️</span>User Story</a>
                                <a href="{% url 'inputUSS' %}"><span class="done-icon">✔️</span>User Story Scenario</a>
                                <a href="{% url 'activity' %}">Activity Diagram</a>
                                <a href="{% url 'sequence' %}">Sequence Diagram</a>
                                <a href="{% url 'classDiag' %}">Class Diagram</a>
                                <a href="{% url 'gui' %}">GUI</a>
                            </div>
                        </td>
                    </tr>
                </tbody>                
            </table>
            
        </section>
    </main>

    <script src="{% static 'js/class.js' %}"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const projectTableBody = document.getElementById("project-table-body");
        
            // Ambil data project dari localStorage
            const projects = JSON.parse(localStorage.getItem("projects")) || [];
        
            // Generate baris tabel
            projects.forEach((project, index) => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${project.name}</td>
                    <td>${project.createdAt}</td>
                    <td>${project.updatedAt}</td>
                    <td>
                        <button class="edit-btn">
                            <img src="{% static 'images/Layout.png' %}" alt="Edit" style="width: 40px; height: 40px;">
                        </button>
                    </td>
                    <td>
                        <button class="edit-btn" data-index="${index}">
                            <img src="{% static 'images/Edit.png' %}" alt="Edit" style="width: 40px; height: 40px;">
                        </button>
                        <button class="delete-btn" data-index="${index}">
                            <img src="{% static 'images/Trash.png' %}" alt="Trash" style="width: 40px; height: 40px;">
                        </button>
                    </td>
                    <td class="dropdown">
                        <button class="history-btn">
                            <img src="{% static 'images/Back copy.png' %}" alt="Back" style="width: 40px; height: 40px;">
                        </button>
                        <div class="dropdown-content">
                            <a href="{% url 'inputUS' %}"><span class="done-icon">✔️</span>User Story</a>
                            <a href="{% url 'inputUSS' %}"><span class="done-icon">✔️</span>User Story Scenario</a>
                            <a href="{% url 'activity' %}">Activity Diagram</a>
                            <a href="{% url 'sequence' %}">Sequence Diagram</a>
                            <a href="{% url 'classDiag' %}">Class Diagram</a>
                            <a href="{% url 'gui' %}">GUI</a>
                        </div>
                    </td>
                `;
                projectTableBody.appendChild(row);
            });
        
            // Tambahkan event listener untuk tombol Edit
            document.querySelectorAll(".edit-btn").forEach(button => {
                button.addEventListener("click", function () {
                    const index = this.dataset.index;
                    const newName = prompt("Edit project name:", projects[index].name);
                    if (newName) {
                        projects[index].name = newName;
                        projects[index].updatedAt = new Date().toLocaleString();
                        localStorage.setItem("projects", JSON.stringify(projects));
                        location.reload(); // Refresh tabel
                    }
                });
            });
        
            // Tambahkan event listener untuk tombol Delete
            document.querySelectorAll(".delete-btn").forEach(button => {
                button.addEventListener("click", function () {
                    const index = this.dataset.index;
                    if (confirm("Are you sure you want to delete this project?")) {
                        projects.splice(index, 1);
                        localStorage.setItem("projects", JSON.stringify(projects));
                        location.reload(); // Refresh tabel
                    }
                });
            });
        });
        </script>
        
</body>
</html>